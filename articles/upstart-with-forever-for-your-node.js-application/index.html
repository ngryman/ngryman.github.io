<!doctype html>
<!--                                                  _
                                                     | |
   _ __   __ _ _ __ _   _ _ __ ___   __ _ _ __    ___| |__
  | '_ \ / _` | '__| | | | '_ ` _ \ / _` | '_ \  / __| '_ \
  | | | | (_| | |  | |_| | | | | | | (_| | | | |_\__ \ | | |
  |_| |_|\__, |_|   \__, |_| |_| |_|\__,_|_| |_(_)___/_| |_|
          __/ |      __/ |
         |___/      |___/

  Because ASCII art matters...

  I salute you young h@x0r.
  I invite you to open the humans.txt file for more info about some cool stuff used to make this blog.

  May the source be with you :)

  ~ngryman();
-->
<html>

<head>
    <meta charset="utf-8">
    <base href="http://ngryman.sh">
    <title>ngryman.sh • Upstart with forever for your node.js application</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <link rel="canonical" href="http://ngryman.sh/articles/upstart-with-forever-for-your-node.js-application">
    <link href="favicon.ico" rel="icon">

    <!-- twitter cards -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Upstart with forever for your node.js application">
    <!--<meta name="twitter:image" content="http://ngryman.sh/articles/upstart-with-forever-for-your-node.js-application.jpg?w=120">-->
    <meta name="twitter:url" content="http://ngryman.sh/articles/upstart-with-forever-for-your-node.js-application">
    <meta name="twitter:description" content="Servers reboot while you are sleeping, it happens …
So you already are using the great forever tool. No? take a look here!.
But something is missing: automatic startup of your application when the mac">
    <meta name="twitter:site" content="@ngryman">
    <meta name="twitter:creator" content="@ngryman">

    <!-- open graph -->
    <meta property="og:type" content="article">
    <!--<meta property="og:title" content="http://ngryman.sh/articles/upstart-with-forever-for-your-node.js-application.jpg?w=120">-->
    <meta property="og:image" content="Upstart with forever for your node.js application">
    <meta property="og:url" content="http://ngryman.sh/articles/upstart-with-forever-for-your-node.js-application">
    <meta property="og:description" content="Servers reboot while you are sleeping, it happens …
So you already are using the great forever tool. No? take a look here!.
But something is missing: automatic startup of your application when the mac">
    <meta property="og:site_name" content="http://ngryman.sh">

    <link href="vendor/prism/prism.css" rel="stylesheet">
    <link href="app.css" rel="stylesheet">

</head>

<body>

<main>
    <article>

        <h1>Upstart with forever for your node.js application</h1>

        <p class="author vcard">
            <span>By</span>
            <a class="url fn" rel="author" href="https://plus.google.com/116260634660700511285">Nicolas Gryman</a>.
            </span>
        </p>

        <p>Servers reboot while you are sleeping, it happens …</p>
<p>So you already are using the great <em><a href="https://github.com/nodejitsu/forever">forever</a></em> tool. No? take a look <a href="http://blog.nodejitsu.com/keep-a-nodejs-server-up-with-forever">here</a>!.
But something is missing: <strong>automatic startup of your application when the machine (re)boots</strong>.</p>
<h2>The use case</h2>
<p>Multiple options are available to you, and quite a lot of resources on the subject too. But I really want to focus on a tricky use case (mine):</p>
<ul>
<li>You want to use <em>forever</em> to <strong>daemonize</strong>, <strong>manage</strong> and <strong>monitor</strong> your application.</li>
<li>You want something simple to <strong>start automatically</strong> your application when the server (re)boots.</li>
<li>Your application is located in the <strong>home directory</strong> of a <strong>dedicated user</strong>.</li>
<li>It <strong>does not</strong> run on the port <strong>80</strong>.</li>
<li>You <strong>don’t want</strong> to start it as <strong>super user</strong>.</li>
</ul>
<h2>Upstart</h2>
<p>Basically you need to set up your own Linux service. I will only focus on <strong>upstart</strong> which is a <em>&quot;replacement for the venerable System-V init&quot;</em>.</p>
<p>As a vast majority of Linux services, you can <strong>start</strong>, <strong>stop</strong> and <strong>restart</strong> your application. These features are already provided by <em>forever</em>.
We will only provide a way to <strong>start automatically</strong> your application. The newly crafted service will only have that purpose. To manage your application, use <em>forever</em> as usual.
We could probably wrap <em>forever</em> behaviour in the service, but this really not the aim of this article.</p>
<h2>The upstart script</h2>
<p>Right of the bat, here is the script:</p>
<script src="https://gist.github.com/ngryman/3823330.js"></script>

<h2>See also</h2>
<p><a href="http://howtonode.org/deploying-node-upstart-monit">Deploying Node.js With Upstart and Monit</a>
<a href="http://caolanmcmahon.com/posts/deploying_node_js_with_upstart">Deploying node.js with Upstart</a>
<a href="http://www.exratione.com/2011/07/running-a-nodejs-server-as-a-service-using-forever">Running a Node.js Server as a Service Using Forever</a>
<a href="http://www.debianadmin.com/manage-linux-init-or-startup-scripts.html">Manage Linux init or startup scripts</a></p>


        <section id="comments">
            <div id="disqus_thread"></div>
        </section>
    </article>
</main>

<!-- external deps, from a global cdn -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>


<!-- external deps, hosted with bibi -->
<script src="vendor/prism/prism.min.js"></script>

<!--application-->
<script src="app.js"></script>

</body>
</html>
